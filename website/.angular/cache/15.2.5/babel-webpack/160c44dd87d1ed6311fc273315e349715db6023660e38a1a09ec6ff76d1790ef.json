{"ast":null,"code":"import { MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\nimport { ContactService } from '../shared/services/contact.service';\nimport { InvalidEmailModalComponent } from '../shared';\nimport { InvalidPhoneNumberModalComponent } from '../shared';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/services/contact.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/card\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"@angular/material/input\";\nimport * as i9 from \"@angular/material/progress-bar\";\nimport * as i10 from \"@angular/common\";\nimport * as i11 from \"@angular/forms\";\nfunction NewContactComponent_div_0_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"mat-form-field\")(2, \"input\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function NewContactComponent_div_0_div_8_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.contact.email = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementStart(4, \"mat-form-field\")(5, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function NewContactComponent_div_0_div_8_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.contact.number = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵelementStart(7, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function NewContactComponent_div_0_div_8_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r5);\n      var ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.addNewContact(ctx_r7.contact));\n    });\n    i0.ɵɵtext(8, \"Create\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    var ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.contact.email);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.contact.number);\n  }\n}\nfunction NewContactComponent_div_0_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 6)(1, \"button\", 7)(2, \"mat-icon\", 8);\n    i0.ɵɵtext(3, \"forward\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction NewContactComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"mat-card\")(2, \"div\")(3, \"h4\");\n    i0.ɵɵtext(4, \"Add New Contact\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-form-field\")(6, \"input\", 1);\n    i0.ɵɵlistener(\"ngModelChange\", function NewContactComponent_div_0_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      var ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.contact.name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(7, \"br\");\n    i0.ɵɵtemplate(8, NewContactComponent_div_0_div_8_Template, 9, 2, \"div\", 0);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(9, NewContactComponent_div_0_a_9_Template, 4, 0, \"a\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.contact.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.contact.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.savingContact);\n  }\n}\nfunction NewContactComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 9);\n    i0.ɵɵtext(2, \"Saving Contact...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"mat-progress-bar\", 10);\n    i0.ɵɵelementEnd();\n  }\n}\nvar NewContactComponent = /** @class */function () {\n  function NewContactComponent(contactService, router, dialog) {\n    this.contactService = contactService;\n    this.router = router;\n    this.dialog = dialog;\n    this.savingContact = false;\n  }\n  NewContactComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.contactService.getContacts().then(function (contacts) {\n      _this.createNewContact(contacts.length);\n    });\n  };\n  NewContactComponent.prototype.createNewContact = function (numContacts) {\n    var contactId = numContacts + 1;\n    this.contact = {\n      id: contactId,\n      email: '',\n      number: '',\n      country: 'us',\n      favorite: false\n    };\n  };\n  NewContactComponent.prototype.addNewContact = function (contact) {\n    var _this = this;\n    if (!this.isFormValid()) {\n      return;\n    }\n    this.savingContact = true;\n    this.contactService.save(contact).then(function () {\n      _this.savingContact = false;\n      _this.router.navigate(['/']);\n    });\n  };\n  NewContactComponent.prototype.isEmailValid = function () {\n    return this.contact.email === '' || this.contact.email !== '' && this.contact.email.includes('@') && this.contact.email.includes('.');\n  };\n  NewContactComponent.prototype.isPhoneNumberValid = function () {\n    return this.contact.number === '' || this.contact.number !== '' && this.contact.number.length === 10 && /^\\d+$/.test(this.contact.number);\n  };\n  NewContactComponent.prototype.isFormValid = function () {\n    if (!this.isEmailValid()) {\n      this.dialog.open(InvalidEmailModalComponent);\n      return false;\n    }\n    if (!this.isPhoneNumberValid()) {\n      this.dialog.open(InvalidPhoneNumberModalComponent);\n      return false;\n    }\n    return true;\n  };\n  NewContactComponent.ɵfac = function NewContactComponent_Factory(t) {\n    return new (t || NewContactComponent)(i0.ɵɵdirectiveInject(i1.ContactService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatDialog));\n  };\n  NewContactComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewContactComponent,\n    selectors: [[\"app-new-contact\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"text\", \"id\", \"contact-name\", \"placeholder\", \"Name\", \"align\", \"end\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"routerLink\", \"/contacts\", 4, \"ngIf\"], [\"matInput\", \"\", \"type\", \"email\", \"css\", \"contact-email\", \"id\", \"contact-email\", \"placeholder\", \"Email\", \"align\", \"end\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"id\", \"tel\", \"type\", \"tel\", \"id\", \"contact-tel\", \"placeholder\", \"Phone Number (10 digits)\", \"align\", \"end\", 3, \"ngModel\", \"ngModelChange\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"create-button\", 3, \"click\"], [\"routerLink\", \"/contacts\"], [\"mat-fab\", \"\", 1, \"back-button\"], [1, \"back-button-icon\"], [1, \"messages\"], [\"mode\", \"indeterminate\", \"aria-label\", \"Indeterminate progress-bar example\", 1, \"app-progress\"]],\n    template: function NewContactComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, NewContactComponent_div_0_Template, 10, 3, \"div\", 0);\n        i0.ɵɵtemplate(1, NewContactComponent_div_1_Template, 4, 0, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.contact && !ctx.savingContact);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.savingContact);\n      }\n    },\n    dependencies: [i4.MatButton, i4.MatFabButton, i5.MatCard, i6.MatFormField, i7.MatIcon, i8.MatInput, i9.MatProgressBar, i10.NgIf, i11.DefaultValueAccessor, i11.NgControlStatus, i11.RequiredValidator, i11.NgModel, i2.RouterLink],\n    styles: [\".back-button[_ngcontent-%COMP%]{color:#fff;cursor:pointer;margin-top:10px;transform:rotate(180deg)}.messages[_ngcontent-%COMP%]{text-align:center}md-input[_ngcontent-%COMP%]{width:300px}\"]\n  });\n  return NewContactComponent;\n}();\nexport { NewContactComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}