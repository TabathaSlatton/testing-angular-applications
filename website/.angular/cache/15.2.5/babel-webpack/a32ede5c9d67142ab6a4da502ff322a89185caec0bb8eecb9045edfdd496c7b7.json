{"ast":null,"code":"import { Router } from '@angular/router';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { ContactService } from '../shared';\nimport { constants } from './contact-list.constants';\nimport { CONTACTS } from '../shared/data/mock-contacts';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/progress-bar\";\nimport * as i7 from \"@angular/material/tooltip\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"../shared/favorite-icon/favorite-icon.directive\";\nimport * as i10 from \"../shared/show-contacts/show-contacts.directive\";\nimport * as i11 from \"../shared/phone-number/phone-number.pipe\";\nfunction ContactListComponent_div_0_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 6);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_0_tr_15_Template_tr_click_0_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r9);\n      var contact_r7 = restoredCtx.$implicit;\n      var ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.onSelect(contact_r7));\n    });\n    i0.ɵɵelementStart(1, \"td\", 7);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_0_tr_15_Template_td_click_1_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r9);\n      var contact_r7 = restoredCtx.$implicit;\n      var ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.onClick(contact_r7));\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"mood\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\", 7);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_0_tr_15_Template_td_click_4_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r9);\n      var contact_r7 = restoredCtx.$implicit;\n      var ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.onClick(contact_r7));\n    });\n    i0.ɵɵelementStart(5, \"strong\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"td\", 7);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_0_tr_15_Template_td_click_7_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r9);\n      var contact_r7 = restoredCtx.$implicit;\n      var ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.onClick(contact_r7));\n    });\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 7);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_0_tr_15_Template_td_click_9_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r9);\n      var contact_r7 = restoredCtx.$implicit;\n      var ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.onClick(contact_r7));\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"phoneNumber\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\")(13, \"mat-icon\", 8);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_0_tr_15_Template_mat_icon_click_13_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r9);\n      var contact_r7 = restoredCtx.$implicit;\n      var ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.editContact(contact_r7));\n    });\n    i0.ɵɵtext(14, \" edit \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\")(16, \"mat-icon\", 9);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_0_tr_15_Template_mat_icon_click_16_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r9);\n      var contact_r7 = restoredCtx.$implicit;\n      var ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.deleteContact(contact_r7));\n    });\n    i0.ɵɵtext(17, \" delete \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"td\", 10)(19, \"i\", 11);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_0_tr_15_Template_i_click_19_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r9);\n      var contact_r7 = restoredCtx.$implicit;\n      var ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.saveContact(contact_r7));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    var contact_r7 = ctx.$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(contact_r7.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(contact_r7.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind4(11, 6, contact_r7.number, \"default\", contact_r7.country, true), \" \");\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"appFavoriteIcon\", contact_r7.favorite)(\"color\", \"gold\")(\"matTooltip\", contact_r7.favorite ? \"Starred\" : \"Not Starred\");\n  }\n}\nfunction ContactListComponent_div_0_a_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 12)(1, \"button\", 13)(2, \"mat-icon\", 14);\n    i0.ɵɵtext(3, \"add\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ContactListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"table\", 1)(2, \"thead\")(3, \"tr\");\n    i0.ɵɵelement(4, \"th\", 2);\n    i0.ɵɵelementStart(5, \"th\", 2);\n    i0.ɵɵtext(6, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 2);\n    i0.ɵɵtext(8, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 2);\n    i0.ɵɵtext(10, \"Number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"th\", 2)(12, \"th\", 2)(13, \"th\", 2);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵtemplate(15, ContactListComponent_div_0_tr_15_Template, 20, 11, \"tr\", 3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(16, \"br\");\n    i0.ɵɵelementStart(17, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_0_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r18);\n      var ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.deleteContacts());\n    });\n    i0.ɵɵtext(18, \" Delete All Contacts \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(19, ContactListComponent_div_0_a_19_Template, 4, 0, \"a\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.contacts);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isLoading && !ctx_r0.deletingContact);\n  }\n}\nfunction ContactListComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ContactListComponent_div_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r20);\n      var ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.refreshContacts());\n    });\n    i0.ɵɵtext(4, \"Add Contacts\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.noContactsFoundMessage);\n  }\n}\nfunction ContactListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"mat-progress-bar\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.loadingContactsMessage);\n  }\n}\nfunction ContactListComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"mat-progress-bar\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.deletingContactMessage);\n  }\n}\nfunction ContactListComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h6\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"mat-progress-bar\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4.deletingContactsMessage);\n  }\n}\nvar ContactListComponent = /** @class */function () {\n  function ContactListComponent(contactService, router, snackBar) {\n    this.contactService = contactService;\n    this.router = router;\n    this.snackBar = snackBar;\n    this.noContactsFoundMessage = constants.NO_CONTACTS_FOUND_MESSAGE;\n    this.loadingContactsMessage = constants.LOADING_CONTACTS_MESSAGE;\n    this.deletingContactsMessage = constants.DELETING_CONTACTS_MESSAGE;\n    this.deletingContactMessage = constants.DELETING_CONTACT_MESSAGE;\n    this.isLoading = true;\n    this.deletingContacts = false;\n    this.deletingContact = false;\n    this.backupContacts = CONTACTS.slice();\n  }\n  ContactListComponent.prototype.ngOnInit = function () {\n    this.getContacts();\n  };\n  ContactListComponent.prototype.onClick = function (contact) {\n    this.router.navigate(['/contact', contact.id]);\n  };\n  ContactListComponent.prototype.editContact = function (contact) {\n    this.router.navigate(['/edit', contact.id]);\n  };\n  ContactListComponent.prototype.displayDeleteSnackBar = function (contact) {\n    var message = \"\".concat(contact.name, \" deleted.\");\n    var snackConfig = {\n      duration: 2000\n    };\n    var actionLabel = '';\n    this.snackBar.open(message, actionLabel, snackConfig);\n  };\n  ContactListComponent.prototype.deleteContact = function (contact) {\n    var _this = this;\n    this.deletingContact = true;\n    this.displayDeleteSnackBar(contact);\n    this.contactService.delete(contact).then(function () {\n      _this.contacts = _this.contacts.filter(function (c) {\n        return c !== contact;\n      });\n      if (_this.selectedContact === contact) {\n        _this.selectedContact = null;\n      }\n      _this.deletingContact = false;\n    });\n  };\n  ContactListComponent.prototype.deleteContacts = function () {\n    var _this = this;\n    this.deletingContacts = true;\n    this.contacts.forEach(function (contact, index) {\n      _this.contactService.delete(contact);\n      if (index === _this.contacts.length - 1) {\n        _this.getContacts();\n      }\n    });\n  };\n  ContactListComponent.prototype.getContacts = function () {\n    var _this = this;\n    this.isLoading = true;\n    this.contactService.getContacts().subscribe(function (resp) {\n      console.log(\"***Get contacts: \", resp);\n      var contacts = resp.data;\n      _this.isLoading = false;\n      _this.deletingContacts = false;\n      _this.contacts = contacts;\n    });\n  };\n  ContactListComponent.prototype.refreshContacts = function () {\n    var _this = this;\n    this.backupContacts.forEach(function (contact, index) {\n      _this.contactService.post(contact);\n      if (index === _this.backupContacts.length - 1) {\n        _this.getContacts();\n      }\n    });\n  };\n  ContactListComponent.prototype.saveContact = function (contact) {\n    contact.favorite = !contact.favorite;\n    this.contactService.save(contact);\n  };\n  ContactListComponent.prototype.onSelect = function (contact) {\n    this.selectedContact = contact;\n  };\n  ContactListComponent.ɵfac = function ContactListComponent_Factory(t) {\n    return new (t || ContactListComponent)(i0.ɵɵdirectiveInject(i1.ContactService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n  };\n  ContactListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ContactListComponent,\n    selectors: [[\"app-contact-list\"]],\n    inputs: {\n      contacts: \"contacts\"\n    },\n    features: [i0.ɵɵProvidersFeature([MatSnackBar])],\n    decls: 5,\n    vars: 5,\n    consts: [[4, \"appShowContacts\"], [1, \"mdl-data-table\", \"mdl-js-data-table\", \"mdl-shadow--2dp\"], [1, \"mdl-data-table__cell--non-numeric\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"routerLink\", \"/add\", 4, \"ngIf\"], [3, \"click\"], [1, \"mdl-data-table__cell--non-numeric\", 3, \"click\"], [\"matTooltip\", \"Edit\", 1, \"edit-icon\", 3, \"click\"], [\"matTooltip\", \"Delete\", 1, \"delete-icon\", 3, \"click\"], [1, \"mdl-data-table__cell--non-numeric\", \"icon\"], [3, \"appFavoriteIcon\", \"color\", \"matTooltip\", \"click\"], [\"routerLink\", \"/add\"], [\"mat-fab\", \"\", \"id\", \"add-contact\", 1, \"add-fab\"], [\"matTooltip\", \"Add new contact\", 1, \"add-fab-icon\"], [1, \"messages\"], [\"mode\", \"indeterminate\", \"aria-label\", \"Indeterminate progress-bar example\", 1, \"app-progress\"]],\n    template: function ContactListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ContactListComponent_div_0_Template, 20, 2, \"div\", 0);\n        i0.ɵɵtemplate(1, ContactListComponent_div_1_Template, 5, 1, \"div\", 0);\n        i0.ɵɵtemplate(2, ContactListComponent_div_2_Template, 4, 1, \"div\", 0);\n        i0.ɵɵtemplate(3, ContactListComponent_div_3_Template, 4, 1, \"div\", 0);\n        i0.ɵɵtemplate(4, ContactListComponent_div_4_Template, 4, 1, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"appShowContacts\", ctx.contacts.length && !ctx.deletingContact && !ctx.deletingContacts);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"appShowContacts\", !ctx.contacts.length && !ctx.isLoading && !ctx.deletingContact && !ctx.deletingContacts);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"appShowContacts\", !ctx.contacts.length && ctx.isLoading && !ctx.deletingContact && !ctx.deletingContacts);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"appShowContacts\", ctx.deletingContact);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"appShowContacts\", ctx.deletingContacts);\n      }\n    },\n    dependencies: [i4.MatButton, i4.MatFabButton, i5.MatIcon, i6.MatProgressBar, i7.MatTooltip, i8.NgForOf, i8.NgIf, i2.RouterLink, i9.FavoriteIconDirective, i10.ShowContactsDirective, i11.PhoneNumberPipe],\n    styles: [\"table[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:50%}tr[_ngcontent-%COMP%]{cursor:pointer}.messages[_ngcontent-%COMP%]{text-align:center}.add-fab[_ngcontent-%COMP%]{float:right;cursor:pointer}.add-fab-icon[_ngcontent-%COMP%], .edit-icon[_ngcontent-%COMP%]{color:#fff}.edit-icon[_ngcontent-%COMP%]:hover{color:#000}.delete-icon[_ngcontent-%COMP%]{color:#fff}.delete-icon[_ngcontent-%COMP%]:hover{color:#000}\"]\n  });\n  return ContactListComponent;\n}();\nexport { ContactListComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}